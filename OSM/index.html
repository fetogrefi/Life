<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1894.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 14.0px}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Courier; -webkit-text-stroke: #000000}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Courier; -webkit-text-stroke: #000000; min-height: 16.0px}
    span.s1 {font-kerning: none}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">/*</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">  </span>Leaflet.TileLayer.ColorFilter</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">  </span>(c) 2018, Claudio T. Kawakani</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">  </span>A simple and lightweight Leaflet plugin to apply CSS filters on map tiles.</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">  </span>https://github.com/xtk93x/Leaflet.TileLayer.ColorFilter</span></p>
<p class="p2"><span class="s1">*/</span></p>
<p class="p2"><span class="s1">L.TileLayer.ColorFilter = L.TileLayer.extend({</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span>intialize: function (url, options) {</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>L.TileLayer.prototype.initialize.call(this, url, options);</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span>},</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span>colorFilter: function () {</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>let VALIDFILTERS = [</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'blur:px',</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'brightness:%', 'bright:brightness:%', 'bri:brightness:%',</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'contrast:%', 'con:contrast:%',</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'grayscale:%', 'gray:grayscale:%',</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'hue-rotate:deg', 'hue:hue-rotate:deg', 'hue-rotation:hue-rotate:deg',</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'invert:%', 'inv:invert:%',</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'opacity:%', 'op:opacity:%',</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'saturate:%', 'saturation:saturate:%', 'sat:saturate:%',</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>'sepia:%', 'sep:sepia:%',</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>]</span></p>
<p class="p3"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>let colorFilterOptions = this.options.filter ? this.options.filter : [];</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>let filterSettings = colorFilterOptions.map((opt) =&gt; {</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>let filter = opt.toLowerCase().split(':');</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (filter.length === 2) {</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>let match = VALIDFILTERS.find(vf =&gt; {</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>return (vf.split(':')[0] === filter[0]);</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (match) {</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>match = match.split(':');</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>filter[1] += /^\d+$/.test(filter[1]) ? match[match.length - 1] : ''</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>return (`${match[match.length - 2]}(${filter[1]})`);</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>return ('');</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).join(' ');</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>return (filterSettings);</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span>},</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span>_initContainer: function () {</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>let tile = L.TileLayer.prototype._initContainer.call(this);</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>this._container.style.filter = this.colorFilter();</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span>},</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span>updateFilter: function (newFilter) {</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>this.options.filter = newFilter;</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (this._container) {</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>this._container.style.filter = this.colorFilter();</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span>},</span></p>
<p class="p2"><span class="s1">})</span></p>
<p class="p3"><span class="s1"></span><br></p>
<p class="p2"><span class="s1">L.tileLayer.colorFilter = function (url, options) {</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span>return new L.TileLayer.ColorFilter(url, options);</span></p>
<p class="p2"><span class="s1">}</span></p>
</body>
</html>
